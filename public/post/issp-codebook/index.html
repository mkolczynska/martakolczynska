<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.42.2" />

  <title>Codebook from ISSP waves 1985-2017 &middot; Marta Kołczyńska</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/foundation.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />

  
    
        <link rel="stylesheet" href="/css/circle.css">
    
  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="/"><img src="/images/puzzleblacksmall.png" alt="logo" /></a>



  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/research/"><i class='fa fa-bar-chart fa-fw'></i>Research</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/contact/"><i class='fa fa-envelope fa-fw'></i>Contact</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/MartaKolcz" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/mkolczynska" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2018. Marta Kołczyńska</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Codebook from ISSP waves 1985-2017</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>23 Apr 2019, 03:03</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="/tags/r">R</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="/tags/survey-data-harmonization">survey data harmonization</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="/tags/codebook">codebook</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="/tags/tools">tools</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="/tags/issp">ISSP</a>
    
  </div>
  
  

</div>

  <p>The <a href="http://www.issp.org" target="_blank">International Social Survey Programme</a> offers a wealth of data, with thematic modules repeated around every 10 years, and a solid and relatively stable block of socio-demographics. The data can be downloaded from the <a href="https://www.gesis.org/issp/home/" target="_blank">GESIS data archive</a> either in separate files per year, or with data bundled by topic (e.g., the Social Inequality dataset contains data from rounds 1987, 1992, 1999, and 2009).</p>
<p>There is no integrated codebook indicating the availability of variables in different rounds, so someone interested in longitudinal analyses would need to download all files, open them and look for the variables of interest. Like almost every long-term multi-wave survey programme, ISSP has gone through different coding and variable naming conventions, which would make the task very time-consuming.</p>
<p>One way to make life easier is to extract a codebook from the data, browse it, and go on to investigate in more details only the rounds that seem to have the right variables.</p>
<p><a href="https://github.com/mkolczynska/martakolczynska/blob/master/content/post/data/issp_codebook_1985_2017.xlsx" target="_blank"><strong>Here it is</strong></a>.</p>
<p>The codebook covers ISSP rounds from 1985 <em>Role of Government I</em> up to the first release of the 2017 module <em>Social Relations and Social Networks III</em>, the most recent file versions as of April 2019. The single wave datasets used here were downloaded by Przemek Powałko.</p>
<p>The codebook function is described in more detail <a href="https://martakolczynska.com/post/codebook-labelled-data/" target="_blank">in this post</a>.</p>
<p>The resulting XLSX file looks like this:</p>
<p><img src="/images/issp_all_codebook.png" width="600" /></p>
<p>Creating the codebook using the code below took several hours on a laptop with a quad-core Intel i7 processor with 8 GB RAM, so it’s best to run overnight.</p>
<pre class="r"><code>### loading packages
library(tidyverse) # for manipulating data
library(haven) # for opening SPSS files
library(labelled) # for using labels
library(questionr) # for getting frequencies
library(rio) # for exporting to different formats; here: XLSX

# path to folder with all ISSP data files
path &lt;- &quot;C:/ISSP&quot;
temp &lt;- list.files(path = path, pattern = &quot;*.sav&quot;)
f &lt;- file.path(path, temp)

issp_all &lt;- lapply(f, haven::read_sav, user_na = TRUE)
names(issp_all) &lt;- temp

for(i in temp) { 
  issp_all[[i]]$Source &lt;- i
  var_label(issp_all[[i]]$Source) &lt;- substr(i, 1, 6) 
  issp_all[[i]] &lt;- issp_all[[i]] %&gt;% select(Source, everything())
}

### codebook function
create_codebook_issp &lt;- function(data) {
  var_labels &lt;- data.frame(cbind(names(var_label(data)), do.call(rbind, var_label(data)))) %&gt;%
    rename(varname = X1, varlabel = X2)
  name_of_file &lt;- as.character(var_labels[1,2])
  freqs &lt;- lapply(data, function(x) { return(questionr::freq(x)) }) %&gt;%
    keep(function(x) nrow(x) &lt; 1000) %&gt;%
    do.call(rbind, .) %&gt;% 
    tibble::rownames_to_column(var = &quot;varname_value&quot;) %&gt;%
    mutate(varname = gsub(&quot;(.+?)(\\..*)&quot;, &quot;\\1&quot;, varname_value),
           value = gsub(&quot;^[^.]*.&quot;,&quot;&quot;,varname_value)) %&gt;%
    group_by(varname) %&gt;%
    mutate(npos = row_number(),
           value_n = paste(value, n, sep = &quot;: &quot;)) %&gt;%
    select(varname, value_n, npos) %&gt;%
    spread(npos, value_n) %&gt;%
    mutate_at(vars(-varname), funs(ifelse(is.na(.), &quot;&quot;, .))) %&gt;%
    unite(&quot;valfreqs&quot;, c(2:ncol(.)), sep = &quot;\n&quot;) %&gt;%
    mutate(valfreqs = sub(&quot;\\s+$&quot;, &quot;&quot;, valfreqs))
  
  full_join(var_labels, freqs, by = &quot;varname&quot;) %&gt;%
    mutate(file_name = name_of_file) %&gt;%
    filter(varname != &quot;Source&quot;)
}

file_names &lt;- read.csv(paste(path, &quot;/issp-file-names.csv&quot;, sep = &quot;&quot;))
issp_all_codebooks &lt;- lapply(issp_all, create_codebook_issp)
issp_all_codebooks_df &lt;- do.call(rbind, issp_all_codebooks) %&gt;%
  left_join(file_names) %&gt;%
  select(file_name, table_name, everything())
export(issp_all_codebooks_df, &quot;codebook_issp_1985_2017.xlsx&quot;)</code></pre>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="/post/harmonization-europe-trust/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="/post/harmonization-europe-trust/">Do-It-Yourself Harmonization: Exploring trust items in three European survey projects</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'https-martakolczynska-netlify-com';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-123060748-1', 'auto');
  ga('send', 'pageview');

</script>





</body>
</html>

