---
title: "First steps in text analysis: Applause and laughter in TED talks"
author: "Marta Kołczyńska"
date: 2018-08-15T15:34:00
categories: ["text"]
tags: ["text analysis", "TED talks", "R", "SICSS"]

---



<p>This year I spent two weeks of the summer attending the <a href="https://compsocialscience.github.io/summer-institute/2018/helsinki/">Summer Institute for Computational Social Science Parter Site (SICSS)</a> in Tvärminne and Helsinki, Finland. The program covered various topics that combine computational and data skills and social science topics. One of the methods discussed was text analysis.</p>
<div id="text-analysis" class="section level4">
<h4>Text analysis</h4>
<p>I downloaded and unzipped the plots.zip file from the link on the GitHub repository. We then read the files into R, and combined them using dplyr.</p>
<p>The TED talk data come from Kaggle: <code>https://www.kaggle.com/rounakbanik/ted-talks</code></p>
<pre class="r"><code>library(stringr)
library(dplyr)
library(tidyr)
library(tidyverse)
library(tidytext) # tokenize</code></pre>
<pre class="r"><code>tedmain &lt;- read.csv(&#39;ted_main.csv&#39;,
                    stringsAsFactors=FALSE)

tedscripts &lt;- read.csv(&#39;transcripts.csv&#39;, 
                       stringsAsFactors=FALSE)

ted &lt;- inner_join(tedmain, tedscripts, by = &quot;url&quot;)

ted$date &lt;- as.POSIXct(ted$film_date,  origin=&quot;1970-01-01&quot;)

ted &lt;- ted %&gt;% filter(date &gt; as.Date(&quot;2010-01-01&quot;))</code></pre>
<p>I use the <code>unnest_tokens</code> function from the <code>tidytext</code> to split the text (transcript) into separate words. This creates a tidy format data frame with one word per row, which means that instead of 2467 rows (TED talks) in the original file we now have 3,589,978 rows. This enables various analyses of the text, including identifying the position and relative positions of individual words in texts.</p>
<pre class="r"><code>ted_words &lt;- ted %&gt;%
  unnest_tokens(word, transcript) %&gt;%
  select(url, word)</code></pre>
<pre class="r"><code>ted_words %&gt;%
  group_by(url) %&gt;%
  mutate(word_pos = row_number() / n()) %&gt;%
  filter(str_detect(str_to_lower(word), &quot;laughter&quot;)) %&gt;%
  ggplot(., aes(word_pos)) + 
    geom_histogram(breaks=seq(0, 1, by = 0.1), col=&quot;darkgreen&quot;, fill=&quot;green&quot;, alpha = .2) + 
    labs(title=&quot;Relative position of laughter&quot;, x=&quot;Position&quot;, y=&quot;Count&quot;)</code></pre>
<p><img src="/post/ted-talks_files/figure-html/laughter-1.png" width="672" /></p>
<pre class="r"><code>ted_words %&gt;%
  group_by(url) %&gt;%
  mutate(word_pos = row_number() / n()) %&gt;%
  filter(str_detect(str_to_lower(word), &quot;applause&quot;)) %&gt;% 
  ggplot(., aes(word_pos)) + 
    geom_histogram(breaks=seq(0, 1, by = 0.1), col=&quot;darkblue&quot;, fill=&quot;blue&quot;, alpha = .2) + 
    labs(title=&quot;Relative position of applause&quot;, x=&quot;Position&quot;, y=&quot;Count&quot;)</code></pre>
<p><img src="/post/ted-talks_files/figure-html/applause-1.png" width="672" /></p>
<pre class="r"><code>ted_words %&gt;%
  group_by(url) %&gt;%
  mutate(laugh = str_detect(str_to_lower(word), &quot;laughter&quot;)) %&gt;%
  summarise(nlaugh = sum(laugh), date = mean(date), n = n(), sharelaugh = nlaugh / n) %&gt;%
  ggplot(., aes(nlaugh)) + 
    geom_histogram(breaks=seq(0, 1, by = 0.1), col=&quot;darkblue&quot;, fill=&quot;blue&quot;, alpha = .2) + 
    labs(title=&quot;Relative position of applause&quot;, x=&quot;Position&quot;, y=&quot;Count&quot;)</code></pre>
<p><img src="/post/ted-talks_files/figure-html/times%20laughter-1.png" width="672" /></p>
</div>
